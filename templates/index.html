<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CZN Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1 class="title">CZN Calculator</h1>
        
        <div class="top-controls">
            <button id="addUnitBtn" class="control-btn">Add Character/Partner</button>
            <button id="editInventoryBtn" class="control-btn">Edit Inventory</button>
        </div>
        
        <div class="materials-section">
            <div class="materials-header" id="materialsHeader">
                <span>Required Materials</span>
                <span class="toggle-icon">â–¼</span>
            </div>
            <div class="materials-content" id="materialsContent">
                <div id="materialsGrid" class="materials-grid"></div>
            </div>
        </div>
        
        <div class="building-units">
            <div id="unitsGrid" class="units-grid"></div>
        </div>
    </div>
    
    <!-- Add Unit Modal -->
    <div id="addUnitModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Add Character/Partner</h2>
            <div class="unit-type-selector">
                <button id="selectCharacterType" class="type-btn active">Combatants</button>
                <button id="selectPartnerType" class="type-btn">Partners</button>
            </div>
            <input type="text" id="unitSearch" class="search-input" placeholder="Search by name...">
            <div id="unitList" class="unit-list"></div>
        </div>
    </div>
    
    <!-- Unit Details Modal (View Only) -->
    <div id="unitDetailsModal" class="modal">
        <div class="modal-content large">
            <span class="close">&times;</span>
            <h2 id="detailsTitle">Character Details</h2>
            <div class="unit-details">
                <div class="details-image">
                    <img id="detailsImage" src="" alt="">
                    <div id="detailsName" class="details-name"></div>
                </div>
                <div class="details-stats">
                </div>
            </div>
            <div class="modal-actions">
                <button id="confirmUnitBtn" class="action-btn confirm" style="display:none;">Add</button>
                <button id="editUnitBtn" class="action-btn confirm" style="display:none;">Edit</button>
                <button id="upgradeUnitBtn" class="action-btn upgrade" style="display:none;">Upgrade</button>
                <button id="removeUnitBtn" class="action-btn remove" style="display:none;">Remove</button>
            </div>
        </div>
    </div>

    <!-- Edit Unit Modal -->
    <div id="editUnitModal" class="modal">
        <div class="modal-content large">
            <span class="close">&times;</span>
            <h2 id="editDetailsTitle">Character Details</h2>
            <div class="unit-details">
                <div class="details-image">
                    <img id="editDetailsImage" src="" alt="">
                    <div id="editDetailsName" class="details-name"></div>
                </div>
                <div class="details-stats">
                    <div class="stats-column">
                        <h3>Current</h3>
                        <div class="stat-group">
                            <label>Level:</label>
                            <input type="number" id="editCurrentLevel" min="1" max="60" value="1">
                        </div>
                        <div class="stat-group">
                            <label>Ascension:</label>
                            <input type="number" id="editCurrentAscension" min="0" max="5" value="0">
                        </div>
                        <div id="editCurrentPotentials" class="potentials-section"></div>
                    </div>
                    <div class="stats-column">
                        <h3>Goal</h3>
                        <div class="stat-group">
                            <label>Level:</label>
                            <input type="number" id="editGoalLevel" min="1" max="60" value="60">
                        </div>
                        <div class="stat-group">
                            <label>Ascension:</label>
                            <input type="number" id="editGoalAscension" min="0" max="5" value="5">
                        </div>
                        <div id="editGoalPotentials" class="potentials-section"></div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button onclick="confirmUnit()" class="action-btn confirm">Save</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Inventory Modal -->
    <div id="editInventoryModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Edit Inventory</h2>
            <div id="inventoryGrid" class="inventory-grid"></div>
            <div class="modal-actions">
                <button id="saveInventoryBtn" class="action-btn confirm">Save</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Item Group Modal -->
    <div id="editItemGroupModal" class="modal">
        <div class="modal-content small">
            <span class="close">&times;</span>
            <h2 id="itemGroupTitle">Edit Items</h2>
            <div id="itemGroupContent" class="item-group-content"></div>
            <div class="modal-actions">
                <button id="saveItemGroupBtn" class="action-btn confirm">Save</button>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
